<!DOCTYPE html>
<html>
<head>
	<meta charset="UTF-8" />
	<title>Master</title>
	<link rel="stylesheet" type="text/css" href="style.css">
	<script type="text/javascript" src="http://hitl019-ubuntu:2403/dpd.js"></script>
	<script type="text/javascript">
		dpd.socket.on('master:info', function (data) {
			console.log("exper",data);
		});


		function startExperiment() {

			console.log("start Experiment");
			console.log("userId: "+document.getElementById("userId").value);
			// Start the experiment by sending the users id to the deployd server
			track(document.getElementById("userId").value, "info", {"function":"startExperiment"});
			dpd.socket.emit('master:start', { "username": document.getElementById("userId").value });
		}

		function track(userId, msgtype, message){
			console.log({"username":userId,"timestamp":new Date().getTime(),"msgtype":msgtype, "message":message, "client":true});

			dpd.track.post({"username":userId,"timestamp":new Date().getTime(),"msgtype":msgtype, "message":message, "client":true}, function(result, err) {});
		}

		function startTest() {

			track(document.getElementById("userId").value, "info", {"function":"startExperiment"});
			dpd.socket.emit('master:startTest', null);
		}

	</script>
</head>
<body>
	<input type="text" name="name" id="userId" value="juhu11">
	<button type="button" id="RepeatButton" onclick="startExperiment()">Start Experiment</button>
	<button type="button" id="RepeatButton" onclick="startTest()">Start testround</button>
</body>
</html>